# About

Most basic curl wrapper. Made for convenience. Runs anywhere in the buffer.

# Usage

|command|action|
|-------|------|
|`:Curl`|try parsing and running the request under the cursor|
|`:CurlNew`|creates a new request boilerplate below the cursor|
|`:CurlScratch ?[v\|h]`|open new scratch buffer. Note: you need to have [scratch.nvim](https://github.com/arctan2/scratch.nvim) plugin installed|

# Syntax

It has a very simple syntax

```
#REQ
<method> <host>
<header>

#<section-name>
<section-content>

<body-optional>

#RES <- optional
<the curl response will come here after running :Curl>

#END
```

## Note:
- The section content is a single paragraph and separate new line is considered as end of section.
- The body should always come after all the other section but before `#RES` or `#END`
- `#RES` should always be before `#END` and after all the other things.

## Sections

`#REQ`

Start of request. It will contain the method, hostname and header in a single block.
Example:
```
#REQ
GET http://localhost:3000
Content-Type: text/html
Another-header-key: Value
#END
```
---
`#ARGS`

Specify args for the curl and other args
Example:
```
#REQ
GET http://localhost:3000

#ARGS
-v --replace-star-slash=false
#END
```

args:
- `-v`, `--verbose`: verbose output
- `--all`: more verbose output
- `--replace-star-slash=[true|false]`: to replace `*/` with `* /` (`*/` will break multi line comments)
- `--out-curl-cmd`: output curl command
---
`#QUERY`

It will contain the list of query params. It's just list of `<key>=<value>`.
Example:
```
#REQ
GET http://localhost:3000
Content-Type: text/html
Another-header-key: Value

#QUERY
cool_key=cool_value
lame_key=lame_value
#END
```
---
`#COOKIES`

It will contain the list of cookies. It's just list of `<key>=<value>`.
Example:
```
#REQ
GET http://localhost:3000
Content-Type: text/html
Another-header-key: Value

#COOKIES
cool_key=cool_value
lame_key=lame_value
#END
```
---
`#RES`

It is a autogenerated section upon run of request. It literally doesn't matter what you put in here it will be just ignored.
Example:
```
#REQ
GET http://localhost:3000
Content-Type: text/html
Another-header-key: Value

#RES
put what ever you want it is ignored.
think of this section as a stdout of the curl output
#END
```
---

`#END`

It marks the end of the request.
Example:
```
#REQ
GET http://localhost:3000
Content-Type: text/html
Another-header-key: Value

{ "cool": "body" }
#END
```
---

# Integration with `scratch.nvim`

If you have `scratch.nvim` plugin installed you can do `:CurlScratch ?[v|h]` to get a new curl scratch buffer which does some basic
highlighting for your sanity. It also gives you some keymaps as follows:
- normal`<leader>rr`: runs the request
- normal`<leader>nr`: new request at end of file
- normal`<leader>jq`: runs `jq` on current line
- visual`<leader>jq`: runs `jq` on visual selected lines

